package com.xingcloud.loader{	import com.xingcloud.core.Config;	import com.xingcloud.core.XingCloud;	import com.xingcloud.util.Reflection;		import flash.display.Loader;	import flash.display.LoaderInfo;	import flash.events.Event;	import flash.net.URLRequest;	import flash.system.ApplicationDomain;	import flash.system.LoaderContext;	import flash.system.SecurityDomain;

	/**	 * 资源加载器，用于加载SWF,IMAGE等可视资源	 */	public class AssetsLoader extends AbstractLoader	{		protected var _loader:Loader;		protected var _context:LoaderContext;		/**		 *新建资源加载器实例 		 * @param url 加载资源的地址		 * @param loaderContext 加载上下文		 * 		 */				public function AssetsLoader(url:String,loaderContext:LoaderContext=null)		{			super(url);			_loader=new Loader();			if(loaderContext)				_context=loaderContext;			else			{				if(!XingCloud.isLocal)					_context=new LoaderContext(false,null,SecurityDomain.currentDomain);			}			addLoaderEventListeners(_loader.contentLoaderInfo);		}		override protected function clear():void		{			removeLoaderEventListeners(_loader.contentLoaderInfo);			super.clear();		}				override protected function doExecute():void		{			super.doExecute();			_loader.load(new URLRequest(_url),_context);		}				override protected function onCompleteHandler(evt:Event):void		{			var loaderInfo:LoaderInfo=evt.target as LoaderInfo;			Reflection.addApplicationDomain(loaderInfo.applicationDomain);			_content=loaderInfo.content;			super.onCompleteHandler(evt);		}					}}